<!DOCTYPE html>
<!--[if lt IE 7]>
<html class="lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>
<html class="lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>
<html class="lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>CEC</title>
    <!-- <link rel="stylesheet" href="style.css"> -->
    <!--[if lt IE 9]>
    <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    <link rel="icon" type="image/png" href="img/favi.png">
    <script type="text/javascript" src="node_modules/jquery/dist/jquery.min.js"></script>
    <script src="node_modules/sweetalert/dist/sweetalert.min.js"></script>
    <link rel="stylesheet" type="text/css" href="node_modules/sweetalert/dist/sweetalert.css">
    <link href="node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <script type="text/javascript" src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <style>
        html, body, div, span, applet, object, iframe,
        h1, h2, h3, h4, h5, h6, p, blockquote, pre,
        a, abbr, acronym, address, big, cite, code,
        del, dfn, em, img, ins, kbd, q, s, samp,
        small, strike, strong, sub, sup, tt, var,
        b, u, i, center,
        dl, dt, dd, ol, ul, li,
        fieldset, form, label, legend,
        table, caption, tbody, tfoot, thead, tr, th, td,
        article, aside, canvas, details, embed,
        figure, figcaption, footer, header, hgroup,
        menu, nav, output, ruby, section, summary,
        time, mark, audio, video {
            margin: 0;
            padding: 0;
            border: 0;
            font-size: 100%;
            font: inherit;
            vertical-align: baseline;
        }

        article, aside, details, figcaption, figure,
        footer, header, hgroup, menu, nav, section {
            display: block;
        }

        body {
            line-height: 1;
        }

        ol, ul {
            list-style: none;
        }

        blockquote, q {
            quotes: none;
        }

        blockquote:before, blockquote:after,
        q:before, q:after {
            content: '';
            content: none;
        }

        table {
            border-collapse: collapse;
            border-spacing: 0;
        }

        .about a {
            color: #eee;
            text-decoration: none;
            border-radius: 2px;
            -webkit-transition: background 0.1s;
            -moz-transition: background 0.1s;
            -o-transition: background 0.1s;
            transition: background 0.1s;
        }

        .about a:hover {
            text-decoration: none;
            background: #555;
            background: rgba(255, 255, 255, 0.15);
        }

        .about-links > a {
            float: left;
            width: 50%;
            line-height: 30px;
            font-size: 12px;
        }

        .about-author > a {
            padding: 1px 3px;
            margin: 0 -1px;
        }

        ::-moz-focus-inner {
            padding: 0;
            border: 0;
        }

        :-moz-placeholder {
            color: #bcc0c8 !important;
        }

        ::-webkit-input-placeholder {
            color: #bcc0c8;
        }

        :-ms-input-placeholder {
            color: #bcc0c8 !important;
        }

        body {
            font: 12px/20px 'Lucida Grande', Verdana, sans-serif;
            color: #404040;
            background: steelblue;
        }

        input, textarea, select, label {
            font-family: inherit;
            font-size: 12px;
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
        }

        .login {
            margin-top: 17%;
            margin-left: auto;
            margin-right: auto;
            text-align: center;
            padding: 18px 20px;
            width: 320px;
            background: #3f65b7;
            background-clip: padding-box;
            border: 1px solid #172b4e;
            border-bottom-color: #142647;
            border-radius: 5px;
            background-image: -webkit-radial-gradient(cover, #437dd6, #3960a6);
            background-image: -moz-radial-gradient(cover, #437dd6, #3960a6);
            background-image: -o-radial-gradient(cover, #437dd6, #3960a6);
            background-image: radial-gradient(cover, #437dd6, #3960a6);
            -webkit-box-shadow: inset 0 1px rgba(255, 255, 255, 0.3), inset 0 0 1px 1px rgba(255, 255, 255, 0.1), 0 2px 10px rgba(0, 0, 0, 0.5);
            box-shadow: inset 0 1px rgba(255, 255, 255, 0.3), inset 0 0 1px 1px rgba(255, 255, 255, 0.1), 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .login > h1 {
            margin-bottom: 20px;
            font-size: 16px;
            font-weight: bold;
            color: white;
            text-align: center;
            text-shadow: 0 -1px rgba(0, 0, 0, 0.4);
        }

        .login-input {
            width: 70%;
            height: 37px;
            margin-bottom: 20px;
            padding: 0 9px;
            color: white;
            text-shadow: 0 1px black;
            background: #2b3e5d;
            border: 1px solid #15243b;
            border-top-color: #0d1827;
            border-radius: 4px;
            background-image: -webkit-linear-gradient(top, rgba(0, 0, 0, 0.35), rgba(0, 0, 0, 0.2) 20%, rgba(0, 0, 0, 0));
            background-image: -moz-linear-gradient(top, rgba(0, 0, 0, 0.35), rgba(0, 0, 0, 0.2) 20%, rgba(0, 0, 0, 0));
            background-image: -o-linear-gradient(top, rgba(0, 0, 0, 0.35), rgba(0, 0, 0, 0.2) 20%, rgba(0, 0, 0, 0));
            background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.35), rgba(0, 0, 0, 0.2) 20%, rgba(0, 0, 0, 0));
            -webkit-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.3), 0 1px rgba(255, 255, 255, 0.2);
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.3), 0 1px rgba(255, 255, 255, 0.2);
        }

        .login-input:focus {
            outline: 0;
            background-color: #32486d;
            -webkit-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.3), 0 0 4px 1px rgba(255, 255, 255, 0.6);
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.3), 0 0 4px 1px rgba(255, 255, 255, 0.6);
        }

        .lt-ie9 .login-input {
            line-height: 35px;
        }

        .login-submit {
            width: 70%;
            height: 37px;
            margin-bottom: 15px;
            font-size: 14px;
            font-weight: bold;
            color: #294779;
            text-align: center;
            text-shadow: 0 1px rgba(255, 255, 255, 0.3);
            background: #adcbfa;
            background-clip: padding-box;
            border: 1px solid #284473;
            border-bottom-color: #223b66;
            border-radius: 4px;
            cursor: pointer;
            background-image: -webkit-linear-gradient(top, #d0e1fe, #96b8ed);
            background-image: -moz-linear-gradient(top, #d0e1fe, #96b8ed);
            background-image: -o-linear-gradient(top, #d0e1fe, #96b8ed);
            background-image: linear-gradient(to bottom, #d0e1fe, #96b8ed);
            -webkit-box-shadow: inset 0 1px rgba(255, 255, 255, 0.5), inset 0 0 7px rgba(255, 255, 255, 0.4), 0 1px 1px rgba(0, 0, 0, 0.15);
            box-shadow: inset 0 1px rgba(255, 255, 255, 0.5), inset 0 0 7px rgba(255, 255, 255, 0.4), 0 1px 1px rgba(0, 0, 0, 0.15);
        }

        .login-submit:active {
            background: #a4c2f3;
            -webkit-box-shadow: inset 0 1px 5px rgba(0, 0, 0, 0.4), 0 1px rgba(255, 255, 255, 0.1);
            box-shadow: inset 0 1px 5px rgba(0, 0, 0, 0.4), 0 1px rgba(255, 255, 255, 0.1);
        }

        .login-help {
            text-align: center;
        }

        .login-help > a {
            font-size: 11px;
            color: #d4deef;
            text-decoration: none;
            text-shadow: 0 -1px rgba(0, 0, 0, 0.4);
        }

        .login-help > a:hover {
            text-decoration: underline;
        }
    </style>
    <script>
        $(document).ready(function () {
            var user, pass;
            $(".login-submit").click(function () {
                user = $("#user").val();
                pass = $("#password").val();

                $('#loginModal').modal({
                    backdrop: false
                });
                $(document).ajaxStart(function () {
                    $("#loginModal").modal('show');
                }).ajaxStop(function () {
                    $("#loginModal").modal('hide');
                });

                $.ajax({
                    method: 'POST',
                    url: '/login',
                    data: {
                        'user': user,
                        'password': pass
                    },
                    cache: false,
                    timeout: 15000,
                    beforeSend: function (xhr, settings) {
                    },
                    error: function () {
                    },
                    success: function (data, textStatus, jqXHR) {
                    },
                    complete: function (xhr, textStatus) {
                    }
                }).done(function (res) {
                            if (res == "yes") {
                                swal('Nice!', 'You\'ve successfully logged in', 'success');
                                window.location.replace('/home');
                                console.log("success");
                            } else if (res == "no") {
                                swal('No!', '', 'success');

                            }

                        })
                        .fail(function (xhr, textStatus, errorThrown) {
                            console.log("1)" + JSON.stringify(xhr));
                            console.log("2)" + textStatus);
                            console.log("3)" + errorThrown);
                            if (textStatus == "timeout") {
                                swal('Request Timed Out');
                            } else {
                                swal('Something Went Wrong');
                            }
                        })
                        .always(function () {
                            console.log("complete");
                        });
                //doesnt work without this
                 return false;
            });
        });
    </script>
</head>
<body>

<form action="index.html" class="login">
    <input id="user" class="login-input" placeholder="Username" style="margin-top:15px;"
           autofocus>
    <input type="password" id="password" class="login-input" placeholder="Password">
    <input type="submit" value="Login" class="login-submit">
    <p class="login-help"><a href="index.html">Forgot password?</a></p>
</form>


<div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="loginModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <!--<div class="modal-header">-->
                <!--<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>-->
                <!--<h4 class="modal-title" id="exampleModalLabel">New message</h4>-->
            <!--</div>-->
            <div class="modal-body" style="text-align: center">
                <div id="loading">
                    <img src="./img/home_loading.gif" alt="Loading" title="Loading" />
                </div>
            </div>
            <div class="modal-footer" style="text-align: center">
                <h5>Loading..</h5>
            </div>
        </div>
    </div>
</div>
</body>
</html>
